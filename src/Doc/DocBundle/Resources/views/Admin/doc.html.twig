{% extends '::admin_base.html.twig' %}
{% block body %}
<div class="center_div">
    <a href="javascript:;" class="add_button" onclick="$('#add_form').toggle();">Creaza document</a>
    <div id="add_form" class="{% if not edit and not app.request.query.get('category_id') %}add_hidden{% endif %}">
        <form action="{{ path('DocDocBundle_doc_handle_forms') }}" method="post" {{ form_enctype(form) }}>
              {{ form_widget(form) }}
              {{ form_rest(form) }}
              {% if app.request.query.get('id') %}
                  <input type="hidden" value="{{ app.request.query.get('id') }}" name="modify_id">
              {% endif %}
              <input type="submit" value="Salveaza" class="btn btn-primary"/>
        </form>
    </div>
    <div>
        <table width="100%" class="table table-striped">
            <tr>
                <th>
                    Categoria
                </th>
                <th>
                    Nume document
                </th>
                <th>
                    Limbi
                </th>
                <th>
                    Activa?
                </th>
                <th>
                    Sortare
                </th>
                <th>
                    Operatii
                </th>
            </tr>
            {% for item in docs %}
                <tr>
                    <td>
                        {{ item.category_name_ro }}
                    </td>
                    <td>
                        {{ item.doc_name_ro }}
                    </td>
                    <td>
                        <b>Completate</b><br />
                        {% for lang, key in item.filled_langs %}
                            <a class="label label-success" href="?action=edit_doc&id={{ key['document_id'] }}" title="Modifica documentul pentru aceasta limba">{{ key['lang_name'] }}</a>
                        {% endfor %}
                        <br />
                        <b>NEcompletate</b><br />
                        {% for lang, key in item.not_filled_langs %}
                            <a class="label label-important" href="?add_language={{ key['id'] }}&doc_list_id={{ item.doc_list_id }}" title="Creaza document pentru aceasta limba">{{ key['lang_name'] }}</a>
                        {% endfor %}
                    </td>
                    <td>
                        {% if item.is_active %}<span class="label label-success">Da</span>{% else %}<span class="label label-important">Nu</span>{% endif %}
                    </td>
                    <td>
                        {{ item.sorting }}
                    </td>
                    <td>
                        <a href="?action=delete_docs&id={{ item.doc_list_id }}" onclick="return confirm('Se vor sterge toate traducerile acestui document!\nConfirmati?')">Sterge</a>
                        <br />
                        <a href="?action=edit_doc_list&id={{ item.doc_list_id }}">Modifica</a>
                        <br />
                        <a href="{{ path('DocDocBundle_doc_files') }}?doc_list_id={{ item.doc_list_id }}">Cimpuri</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}